<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="style.css" type="text/css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
    />
    <script src="/archive.js" defer></script>
     <link href="arena.css" type="text/css" rel="stylesheet" />
    <title>only make</title>
  </head>

  <body>
    <header>  
     
      <h1>
        Our projects:
      </h1>
      
    </header>
    <main>
      <p>
        If you'd like to share what you're working on, please add it to the <a href="https://www.are.na/there-is-only-make/fruits-ej_nr24q6pi" target="_blank">"fruits"</a> channel on are.na and it will automatically appear below.
      </p>
      <br>
    
    <div id="orientation-blocks"></div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      let orientation = [];
      const orientationWrapper = document.getElementById("orientation-blocks");

      const axiosArena = axios.create({
        baseURL: "https://api.are.na/v2/"
      });

      let loading = document.createElement("div");
      loading.className = "loading";
      loading.innerHTML = "loading...";
      orientationWrapper.appendChild(loading);

      axiosArena.defaults.headers.Authorization = "Bearer ---";
      axiosArena
        .get("channels/fruits-ej_nr24q6pi?per=100")
        .then(response => {
          console.log(response);
          if (response.data && response.data.contents.length > 1) {
            orientationWrapper.removeChild(loading);
            createOrientation(response.data.contents);
          } else {
          }
        });

      function createOrientation(orientationData) {
        for (let i = 0; i < orientationData.length; i++) {
          //create block
          let block = document.createElement("div");
          block.className = "block";

          if (orientationData[i].source) {
            block = document.createElement("a");
            block.className = "block";
            block.href = orientationData[i].source.url;
            block.target = "_blank";
          }

          if (orientationData[i].class === "Channel") {
            block = document.createElement("a");
            block.className = "channel";
            block.href = `https://are.na/${orientationData[i].user.slug}/${orientationData[i].slug}`;
            block.target = "_blank";
          }

          //create image
          if (orientationData[i].image && orientationData[i].image) {
            const image = document.createElement("img");
            image.className = "image";
            image.src = orientationData[i].image.square.url;
            block.appendChild(image);
          }
          //create title
          if (orientationData[i].title) {
            const title = document.createElement("div");
            title.className = "arenatitle";
            title.innerHTML = orientationData[i].title;
            block.appendChild(title);
          }

          //create text
          if (orientationData[i].class === "Text") {
            const text = document.createElement("div");
            text.className = "text";
            text.innerHTML = orientationData[i].content;
            block.appendChild(text);
            
            
          }

          orientationWrapper.appendChild(block);
        }
      }
    </script> 
        
    </main>
  </body>
</html>
